(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1934d424"],{"07ac":function(t,e,a){var r=a("23e7"),n=a("6f53").values;r({target:"Object",stat:!0},{values:function(t){return n(t)}})},"1cc4":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"d-flex justify-content-around"},[a("div",{}),a("h3",{staticClass:"mt-3"},[t._v("購物車列表")]),a("div",{staticClass:"d-flex align-items-end"},[a("button",{staticClass:"btn btn-outline-info",attrs:{type:"button"},on:{click:function(e){return t.removeAll()}}},[t._v("清除全部")])])]),t._m(0),t._l(t.carts,(function(e,r){return a("div",{key:r,staticClass:"row mt-3 mx-2"},[a("div",{staticClass:"col-2"},[a("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(a){return t.removeOne(e.product.id)}}},[t._v(" 刪除 ")])]),a("div",{staticClass:"col-3"},[t._v(t._s(e.product.title))]),a("div",{staticClass:"col-2"},[a("img",{attrs:{src:e.product.imageUrl,width:"50px"}})]),a("div",{staticClass:"col-2"},[a("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(e){return t.addQuantity(!1,r)}}},[t._v(" - ")]),t._v(" "+t._s(e.quantity)+" "),a("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(e){return t.addQuantity(!0,r)}}},[t._v(" + ")])]),a("div",{staticClass:"col-1"},[t._v(t._s(e.product.unit))]),a("div",{staticClass:"col-2"},[t._v(t._s(parseInt(e.quantity)*parseInt(e.product.price)))])])})),a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col-10 text-right"},[t._v("總計:$")]),a("div",{staticClass:"col-2 text-left"},[t._v(t._s(t.totalCost))])]),a("div",{staticClass:"container"},[a("form",{staticClass:"row"},[a("div",{staticClass:"form-group col-sm-6"},[a("label",{attrs:{for:"name"}},[t._v("姓名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderOwn.require.name,expression:"orderOwn.require.name"}],staticClass:"form-control",attrs:{id:"name",type:"text",name:"name",required:""},domProps:{value:t.orderOwn.require.name},on:{input:function(e){e.target.composing||t.$set(t.orderOwn.require,"name",e.target.value)}}})]),a("div",{staticClass:"form-group col-sm-6"},[a("label",{attrs:{for:"tel"}},[t._v("電話")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderOwn.require.tel,expression:"orderOwn.require.tel"}],staticClass:"form-control",attrs:{id:"tel",type:"tel",name:"tel",required:""},domProps:{value:t.orderOwn.require.tel},on:{input:function(e){e.target.composing||t.$set(t.orderOwn.require,"tel",e.target.value)}}})]),a("div",{staticClass:"form-group col-sm-6"},[a("label",{attrs:{for:"email"}},[t._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderOwn.require.email,expression:"orderOwn.require.email"}],staticClass:"form-control",attrs:{id:"email",type:"email",name:"email",required:""},domProps:{value:t.orderOwn.require.email},on:{input:function(e){e.target.composing||t.$set(t.orderOwn.require,"email",e.target.value)}}})]),a("div",{staticClass:"form-group col-sm-6"},[a("label",{attrs:{for:"address"}},[t._v("地址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderOwn.require.address,expression:"orderOwn.require.address"}],staticClass:"form-control",attrs:{id:" address",type:"address",name:"address",required:""},domProps:{value:t.orderOwn.require.address},on:{input:function(e){e.target.composing||t.$set(t.orderOwn.require,"address",e.target.value)}}})]),a("div",{staticClass:"form-group col-12"},[a("label",{attrs:{for:"payment"}},[t._v("付款方式")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.orderOwn.require.payment,expression:"orderOwn.require.payment"}],staticClass:"form-control",attrs:{name:"payment",id:"payment",required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.orderOwn.require,"payment",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"WebATM"}},[t._v("WebATM")]),a("option",{attrs:{value:"Barcode"}},[t._v("Barcode")]),a("option",{attrs:{value:"Credit"}},[t._v("Credit")]),a("option",{attrs:{value:"ApplePay"}},[t._v("ApplePay")]),a("option",{attrs:{value:"GooglePay"}},[t._v("GooglePay")])])]),a("div",{staticClass:"col-12 pb-3"},[a("label",{attrs:{for:"message"}},[t._v("留言")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.orderOwn.message,expression:"orderOwn.message"}],staticClass:" form-control",staticStyle:{resize:"none"},attrs:{id:"message",name:"message",cols:"50",rows:"5"},domProps:{value:t.orderOwn.message},on:{input:function(e){e.target.composing||t.$set(t.orderOwn,"message",e.target.value)}}})]),a("div",{staticClass:"col-sm-6"}),a("div",{staticClass:"col-12 col-sm-6 pb-5"},[a("button",{ref:"active",staticClass:"btn btn-primary float-right w-100",attrs:{type:"submit",disabled:""},on:{click:function(e){return e.preventDefault(),t.submitCart()}}},[t._v("送出表單")])])])]),a("div",{ref:"orderModal",staticClass:"modal fade",attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("finish-modal")],1)],2)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row mx-2"},[a("div",{staticClass:"col-2"},[t._v("#")]),a("div",{staticClass:"col-3"},[t._v("內容")]),a("div",{staticClass:"col-2"},[t._v("圖片")]),a("div",{staticClass:"col-2"},[t._v("數量")]),a("div",{staticClass:"col-1"},[t._v("單位")]),a("div",{staticClass:"col-2"},[t._v("小計")])])}],o=(a("99af"),a("4de4"),a("d81d"),a("d3b7"),a("07ac"),function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)}),i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("完成訂單")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),a("div",{staticClass:"modal-body"},[a("p",[t._v("恭喜你已完成訂單。")])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("關閉")])])])])])}],s=a("2877"),c={},l=Object(s["a"])(c,o,i,!1,null,null,null),d=l.exports,u={data:function(){return{carts:[],orderOwn:{require:{name:"",email:"",tel:"",address:"",payment:""},message:""}}},components:{FinishModal:d},methods:{getCartList:function(){var t=this,e=this.$loading.show();this.$http.get("".concat("https://course-ec-api.hexschool.io/api","/").concat("b090295f-d376-47f5-8502-94f3712a3406","/ec/shopping")).then((function(e){t.carts=e.data.data})).catch((function(t){console.log(t)})).finally((function(){e.hide()}))},submitCart:function(){var t=this,e=this.$loading.show();this.$http.post("".concat("https://course-ec-api.hexschool.io/api","/").concat("b090295f-d376-47f5-8502-94f3712a3406","/ec/orders"),Object.assign(this.orderOwn.require,{message:this.orderOwn.message})).then((function(e){t.removeAll(),t.getCartList(),t.$(t.$refs.orderModal).modal("show")})).catch((function(t){console.log(t)})).finally((function(){e.hide()}))},addQuantity:function(t,e){var a=this,r=this.carts[e].quantity,n=this.$loading.show();(1!==r||t)&&(t?r++:r--,this.$http.patch("".concat("https://course-ec-api.hexschool.io/api","/").concat("b090295f-d376-47f5-8502-94f3712a3406","/ec/shopping"),{product:this.carts[e].product.id,quantity:r}).then((function(t){a.getCartList()})).catch((function(t){console.log(t)})).finally((function(){n.hide()})))},removeOne:function(t){var e=this,a=this.$loading.show();this.$http.delete("".concat("https://course-ec-api.hexschool.io/api","/").concat("b090295f-d376-47f5-8502-94f3712a3406","/ec/shopping/").concat(t)).then((function(t){e.getCartList()})).catch((function(t){console.log(t)})).finally((function(){a.hide()}))},removeAll:function(){var t=this,e=this.$loading.show();this.$http.delete("".concat("https://course-ec-api.hexschool.io/api","/").concat("b090295f-d376-47f5-8502-94f3712a3406","/ec/shopping/all/product")).then((function(e){t.getCartList()})).catch((function(t){console.log(t)})).finally((function(){e.hide()}))}},created:function(){this.getCartList()},computed:{totalCost:function(){var t=0;return this.carts.map((function(e){t+=e.product.price*e.quantity})),t}},watch:{orderOwn:{handler:function(){this.$refs.active.disabled=0!==Object.values(this.orderOwn.require).filter((function(t){return""===t})).length},deep:!0}}},f=u,v=Object(s["a"])(f,r,n,!1,null,null,null);e["default"]=v.exports},"1dde":function(t,e,a){var r=a("d039"),n=a("b622"),o=a("2d00"),i=n("species");t.exports=function(t){return o>=51||!r((function(){var e=[],a=e.constructor={};return a[i]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"4de4":function(t,e,a){"use strict";var r=a("23e7"),n=a("b727").filter,o=a("1dde"),i=a("ae40"),s=o("filter"),c=i("filter");r({target:"Array",proto:!0,forced:!s||!c},{filter:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},"65f0":function(t,e,a){var r=a("861d"),n=a("e8b5"),o=a("b622"),i=o("species");t.exports=function(t,e){var a;return n(t)&&(a=t.constructor,"function"!=typeof a||a!==Array&&!n(a.prototype)?r(a)&&(a=a[i],null===a&&(a=void 0)):a=void 0),new(void 0===a?Array:a)(0===e?0:e)}},"6f53":function(t,e,a){var r=a("83ab"),n=a("df75"),o=a("fc6a"),i=a("d1e7").f,s=function(t){return function(e){var a,s=o(e),c=n(s),l=c.length,d=0,u=[];while(l>d)a=c[d++],r&&!i.call(s,a)||u.push(t?[a,s[a]]:s[a]);return u}};t.exports={entries:s(!0),values:s(!1)}},8418:function(t,e,a){"use strict";var r=a("c04e"),n=a("9bf2"),o=a("5c6c");t.exports=function(t,e,a){var i=r(e);i in t?n.f(t,i,o(0,a)):t[i]=a}},"99af":function(t,e,a){"use strict";var r=a("23e7"),n=a("d039"),o=a("e8b5"),i=a("861d"),s=a("7b0b"),c=a("50c4"),l=a("8418"),d=a("65f0"),u=a("1dde"),f=a("b622"),v=a("2d00"),p=f("isConcatSpreadable"),m=9007199254740991,h="Maximum allowed index exceeded",g=v>=51||!n((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),b=u("concat"),C=function(t){if(!i(t))return!1;var e=t[p];return void 0!==e?!!e:o(t)},w=!g||!b;r({target:"Array",proto:!0,forced:w},{concat:function(t){var e,a,r,n,o,i=s(this),u=d(i,0),f=0;for(e=-1,r=arguments.length;e<r;e++)if(o=-1===e?i:arguments[e],C(o)){if(n=c(o.length),f+n>m)throw TypeError(h);for(a=0;a<n;a++,f++)a in o&&l(u,f,o[a])}else{if(f>=m)throw TypeError(h);l(u,f++,o)}return u.length=f,u}})},ae40:function(t,e,a){var r=a("83ab"),n=a("d039"),o=a("5135"),i=Object.defineProperty,s={},c=function(t){throw t};t.exports=function(t,e){if(o(s,t))return s[t];e||(e={});var a=[][t],l=!!o(e,"ACCESSORS")&&e.ACCESSORS,d=o(e,0)?e[0]:c,u=o(e,1)?e[1]:void 0;return s[t]=!!a&&!n((function(){if(l&&!r)return!0;var t={length:-1};l?i(t,1,{enumerable:!0,get:c}):t[1]=1,a.call(t,d,u)}))}},b727:function(t,e,a){var r=a("0366"),n=a("44ad"),o=a("7b0b"),i=a("50c4"),s=a("65f0"),c=[].push,l=function(t){var e=1==t,a=2==t,l=3==t,d=4==t,u=6==t,f=5==t||u;return function(v,p,m,h){for(var g,b,C=o(v),w=n(C),y=r(p,m,3),_=i(w.length),O=0,x=h||s,q=e?x(v,_):a?x(v,0):void 0;_>O;O++)if((f||O in w)&&(g=w[O],b=y(g,O,C),t))if(e)q[O]=b;else if(b)switch(t){case 3:return!0;case 5:return g;case 6:return O;case 2:c.call(q,g)}else if(d)return!1;return u?-1:l||d?d:q}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}},d81d:function(t,e,a){"use strict";var r=a("23e7"),n=a("b727").map,o=a("1dde"),i=a("ae40"),s=o("map"),c=i("map");r({target:"Array",proto:!0,forced:!s||!c},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},e8b5:function(t,e,a){var r=a("c6b6");t.exports=Array.isArray||function(t){return"Array"==r(t)}}}]);
//# sourceMappingURL=chunk-1934d424.4d815589.js.map